# curmmerce_project
k-mean클러스터링과 cohort

고객의 구매 활동성을 높이고 추가 구매 유도를 위한 분석
==============

요약
--------------------------------------
1. 기본 정보
- 개인 프로젝트(기여도 100%)
***
2. 프로젝트 진행 배경
- cohort 배우고 이를 적용하기 위해 실시했습니다.
- k-mean클러스터링을 배우고 이를 분석에 활용하기 위해 실시했습니다.
- a/b테스트를 배우고 이를 활용해보기 위해 실시했습니다.
***
3. 데이터셋
- online_commerce_data.csv : ['customer_no', 'age', 'gender', 'order_no', 'order_date', 'channel', 'item_category', 'item_code', 'item_name', 'price', 'qty', 'order_amount', 'discount_amount', 'paid_amount']

상세
--------
***
### 1. 문제 정의
- 2015년부터 시작한 이 기업의 2021년 월별 신규 이용자의 수와 재구매율은 지속적으로 감소하고 있습니다.
- 5월달까지는 총 매출이 지속적으로 상승하고 있었지만 6월달에 총 매출이 20% 감소하였습니다. 

- 총 매출의 지속적인 감소로 이어지지 않게 하기 위해 구매자들을 세그먼트하고 맞춤 상품을 제안하여 구매 활동성을 높이기 위한 방안을 제시하기 위해 분석을 진행했습니다.

***
### 2. 문제 인식
![dashboard1](image\dash1.png)
- 2021년 6월의 신규 이용자 수는 3월 신규 이용자 수의 30%로 4개월간 70% 줄었습니다.
- 신규 이용자들의 재구매율 또한 지속적으로 감소하는 것을 알 수 있습니다.
  - 2월 신규 이용자의 재구매율은 74%로 2021년 중에 제일 높습니다. 하지만 이후 신규 이용자의 다음달 재구매율은 감소하고 있습니다.
  - 하지만 4월 재구매율은 지속적으로 감소하여 45%도 안되는걸 확인 할 수 있습니다.
- 6월의 매출은 5월 매출 대비 20% 감소하였습니다.
- 신규 이용자와 재구매율이 지속적으로 감소하는 동향을 띄고있어서 6월의 매출 감소는 이후 총 매출액의 지속적인 감소로 이어지는 시발점으로 해석될 수 있습니다.
-------

### 3. EDA
###### 1. 판매 채널(TV와 모바일) 비교 탐색
![online_offline](image\dash3.png)
- TV 매출은 꾸준히 증가하는 반면 모바일의 6월 매출은 감소했습니다.
- 모바일 판매 거래 비중이 tv보다 14.6% 더 높습니다
- 위의 두 가지 정보로 인해 총 매출의 감소 원인은 모바일 매출의 감소에 영향을 받은 것을 알 수있습니다.
----
###### 2. 할인 탐색
![refund_amt](image/dash4.png)
![refund_amt](image/pramid.png)
- 할인을 활용해 성사된 거래는 전체 거래중 47.6%입니다
- 산점도를 확인해보면 TV는 할인율이 증가함에 따라 주문 금액도 증가하는 거래들이 존재합니다.
  - 반대로 모바일의 경우 주문 금액이 높은 대다수의 거래들의 할인율이 10% 이하입니다.
- tv의 경우 할인율이 높을수록 모바일보다 거래 빈도수가 증가합니다.
  - 반면에 모바일의 경우 할인율이 높아도 거래 빈도수는 낮고 오히려 할인율이 없거나 낮을때(15% 이하) 더 많이 일어납니다.


----
### 4. 예상 시나리오
##### 1. 모바일 고객들을 군집화하여 특징을 찾고 맞춤형 추가 구매 유도를 위한 방안을 찾으면 되지 않을까?
- 이유 
  1. 고객들의 모바일 판매 거래 비중이 14.6% 더 높습니다.
  2. TV의 총 매출은 꾸준히 우상향하고 있지만 모바일의 경우 6월에 감소하였습니다.
- 해결 방안
  1. 고객들을 군집화하여 여러 개의 고객 집단을 만든다
  2. 해당 집단별로 분석을 실시하여 마케팅 방안을 모색한다.
---------

### 5. k-mean 클러스터 모델 적용
##### 1. k-mean 클러스터링
- 모바일 고객 군집화(k-mean 클러스터링)
  - 고객들의 구매 데이터를 가지고 고객들을 분류하기 위해 k-mean 클러스터링 모델을 사용하였습니다.
![boxplot](image\silhouette1.png)
- 클러스터 개수를 찾기 위해 클러스터별 실루엣 계수 파악 및 시각화하였습니다.
  - 6개의 클러스터일때 실루엣 계수가 제일 0에 가깝기 때문에 클러스터 갯수는 6개로 선택 하였습니다.
![boxplot](image\cluster2.png)
--------
### 6. 분석

##### 군집 파악 및 정의
![boxplot](image\cluster1.png)
- 클러스터 1번 집단 : 작은 집에 혼자 사는 고객들
  - 이유 : 생수 구매가 제일 많고 언더웨어와 즉석식품 구매가 그 다음으로 많다. 그리고 고객들의 연령대가 주로 30~40대이다.
- 클러스터 2번 집단 : 캠핑을 좋아하는 고객들
  - 이유 : 캠핑 용품인 코펠/식기를 주로 구매했다
- 클러스터 3번 집단 : 음식점을 운영하는 고객들
  - 이유 : 구매 물품 중 밥솥이 제일 많고 냉장고, 공기 청정기 등 음식점에 필요한 물품들이기 때문이다.
- 클러스터 4번 집단 : 가전제품 판매하는 고객들
  - 이유 : 구매 비중이 높은 물품이 세탁기, 냉장고, TV 등 전부 가젠제품이기 때문이다.
- 클러스터 5번 집단 : 자녀가 없는 주부들
  - 이유 : 여성 고객의 비율이 70%이고 구매한 물품이 생수, 비닐팩, 주방장갑 같은 가정 용품이기 때문이다.
- 클러스터 6번 집단 : 자녀가 존재하는 고객들
  - 이유 : 대부분의 구매 물품이 이유식, 분유, 기저귀 등 유아 물품이기 때문이다.
-------
##### 1. 할인여부에 다른 주문 금액 차이 분석
- 할인 여부에 따른 주문 금액 차이를 알아보고자 t-test를 진행하였습니다.
###### 모델 설정
- 비교 지표 : 할인 받은 거래, 할인을 받지 않은 거래
- 관심 지표 : 할인 여부(0은 할인X, 1은 할인O)
- 귀무 가설 : 할인 여부로 인한 결제 금액의 차이는 존재하지 않는다
- 대립 가설 : 할인 여부로 인한 결제 금액의 차이는 존재한다
###### 분석 결과
1. 작은 집에 혼자 사는 고객들
   - p-value가 0으로 유의수준(0.05)보다 작아 할인 여부가 주문 금액에 영향을 끼친다는 대립 가설을 채택하게 됩니다.
2. 캠핑을 좋아하는 고객들
   - 분석 불가 : 해당 군집의 고객수가 분석을 진행하기에는 적어 분석이 불가능했습니다.
3. 음식점을 운영하는 고객들
     - p-value가 0.68로 유의수준(0.05)보다 높아 할인 여부로 인한 결제 금액의 차이는 존재한다는 귀무가설을 기각하지 못해 할인 여부와 주문 금액은 서로 영향을 끼치지 못합니다.
4. 가전제품을 판매하는 고객들
     - 분석 불가 : 할인을 받지 않은 거래가 존재하지 않아 분석이 불가능 했습니다.
5. 자녀가 없는 주부들
     - p-value가 1.67로 유의수준(0.05)보다 커서 귀무 가설을 기각하지 못했습니다. 이는 할인여부로 인한 결제 금액의 차이는 존재하지 않는다고 할 수 있습니다.
6. 자녀가 존재하는 고객들
     - p-value가 9.08로 유의수준(0.05)보다 커서 귀무 가설을 기각하지 못했습니다. 이는 할인여부로 인한 결제 금액의 차이는 존재하지 않는다고 할 수 있습니다.
--- 
##### 2. 군집별 할인과 주문 금액 선형 회귀 분석
- 두 연속형 변수 간의 관계(할인이 추가 구매를 유도할 수 있을까?)를 파악하기 위해 선형 회귀 분석을 실시 하였습니다.
###### 모델 설정
- 변수 : 할인율(독립 변수), 주문 금액(종속 변수)

- 귀무 가설 : 할인율과 주문 금액은 서로 관계가 없다.
- 대립 가설 : 할인율과 주문 금액은 서로 관계가 있다.
###### 분석 결과
1. 작은 집에 혼자 사는 고객들
   - p-value가 0으로 할인율이 주문 금액과 서로 관계가 있다는 대립 가설이 채택되었습니다.
   - 생활한데 필요한 필수재에 해당하는 생수의 판매 비중이 독보적으로 높은 것에 비해 할인이 주문 금액과 관계가 있다는 것은 해당 고객들은 할인이 결제하는데 있어 매우 큰 영향을 끼친다고 판단됩니다. 
2. 캠핑을 좋아하는 고객들
   - 분석 불가 : 해당 군집의 고객수가 분석을 진행하기에는 적어 분석이 불가능했습니다.
3. 음식점을 운영하는 고객들
     - p-value가 경계에 해당하는 0.05로 할인율이 주문 금액 영향을 끼치는지 안 끼치는지 판단하기가 애매하였습니다.
     - 하지만 
4. 가전제품을 판매하는 고객들
     - p-value가 0으로 할인과 주문 금액이 관계가 있다는 것을 확인했습니다.
5. 자녀가 없는 주부들
     - p-value가 0.5로 유의수준보다 커서 귀무 가설을 기각하지 못했습니다. 이는 할인율과 결제 금액은 서로 관계가 없다고 검증되었습니다.
     - 
6. 자녀가 존재하는 고객들
     - p-value가 0.12로 유의수준보다 커서 할인과 결제 금액은 서로 관계가 없다고 판단됩니다.
     - 이는 유아의 생필품의 경우 필수재에 해당하여 가격의 변동에 따른 수요가 쉽게 변동하지 않기 때문이라고 판단됩니다.

![barplot2](image/barplot2.png)

- 환불율이 13%이상인 카테고리들을 추려냈습니다
- 아동 의류와 여성 의류, 개인 가전 제품은 절반이 넘는 구매자들이 해당 카테고리에 대해 불만족스러웠다고 판단할 수 있습니다.

![refund_cate](image/refund_cate.png)
- 해당 카테고리들의 월별 환불율을 확인해본 결과 저번달(2014년 2월)에만 환불율이 급증했습니다.


----------

### 6. 결론
- 카테고리별 온라인과 오프라인의 평균 매출이 통계적으로 차이가 없지만 온라인 판매의 점유율이 80%로 매우 높습니다. 이를 이용하여 온라인 판매를 성장시키면 오프라인보다 평균 매출이 증가하게 되고 이는 총 매출의 증가를 야기할 것입니다. 
  - 온라인 평균 매출 증가시키는 방안
    - 온라인 일정 금액 이상 구매시 할인 쿠폰 증정 : 이는 오프라인 매장과 독립적으로 매출을 증가시키는 반면에 고객 입장에서는 할인을 받기 때문에 서로에게 좋은 마케팅 전략 입니다.
- 의류의 경우 환불의 원인이 고객의 불만족 말고도 맞지 않은 사이즈, 옷의 재질 등 다른 이유들이 존재하지만 이를 고려해도 58%가 넘는 환불율은 문제가 있다고 판단됩니다. 따라서 의류의 환불율을 낮춰서 매출을 올리는 전략이 필요하다고 생각합니다
  - 의류의 환불율을 낮추고 매출을 증가시키는 방안
    - 체형별 피팅 모델 분류 : 의류를 입어보고 살 수 없는 온라인의 점유율이 80%이기 때문에 온라인 구매자들이 자신의 체형에 맞는 모델들의 착용 사진을 보고 구매하고 온라인과 다르게 느껴져서 환불하는 경우를 줄임과 동시에 체형에 맞는 모델이 입은 다른 의류를 보고 구매를 유도할 수 있습니다.
- 대카테고리 5개중 환불율이 제일 낮은 전자기기지만 가전 제품의 경우 환불율이 67%로 제일 높습니다. 가전 제품의 경우 판매 당시 제품의 성능을 중심으로 홍보를 하기 때문에 성능이 불만족스러워서 구매자가 환불을 하는 경우는 별로 없을 것이라고 생각합니다. 가전제품 뿐 아니라 의류도 환불율이 증가했기 때문에 제품 자체의 문제가 아니라고 판단됩니다. 온라인 판매 비중이 높기 때문에 고객에게 물품을 배달하면서 생긴 손상 및 파손, 과잉 광고 등 현재 데이터로 파악할 수 없는 문제가 있다고 생각됩니다.
    - 가전 제품의 환불율을 낮추는 방안
      - 고객의 환불 사유를 파악하고 해당 사유를 개선해야합니다.
- 2014년 2월에 구매자들이 어떤 것을 계기로 환불율이 증가했는지 찾아보고 해당 원인을 개선해야 매출이 다시 상승할 수 있을 것 같습니다.
-----
### 7. 리뷰
- 매출을 단순 총 매출액으로만 설정하고 분석을 진행하였습니다.
  - 커머스 데이터에서는 매출액과 고객 유지 및 유입도 중요하기 때문에 고객 유지 및 유입 부분을 지표로 다루지 못한 것이 아쉽다고 느껴집니다
- 실시했던 ab테스트의 비교지표를 매출 평균이 아닌 다른 것(고객 유입 수, 재주문수)으로 했으면 더 좋은 분석이 되었을 것 같다고 생각합니다.
- 대시보드를 시각화툴로 진행했으면 좋겠다고 생각합니다.
